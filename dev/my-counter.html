<!-- [çº¦å®š] 1. æ ·å¼åªåœ¨å½“å‰ç»„ä»¶å†…ç”Ÿæ•ˆï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ -->
<style>
    .counter-card {
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        width: 300px;
        background: #f9f9f9;
        font-family: Arial, sans-serif;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .display-area {
        font-size: 2em;
        text-align: center;
        margin: 15px 0;
        color: #333;
    }

    .btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
    }

    button {
        padding: 8px 16px;
        cursor: pointer;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        transition: background 0.2s;
    }

    button:hover { background: #2980b9; }

    .input-group { margin-top: 20px; border-top: 1px solid #ddd; padding-top: 10px; }
    input { padding: 5px; width: 100%; box-sizing: border-box; }
    
    .warning { color: red; font-size: 0.9em; text-align: center; margin-top: 5px; }
</style>

<!-- [çº¦å®š] 2. template æ ‡ç­¾åŒ…è£¹ HTML ç»“æ„ -->
<template>
    <div class="counter-card">
        <h3>ğŸ“Š å“åº”å¼è®¡æ•°å™¨</h3>
        
        <div class="display-area">
            <!-- [çº¦å®š] s-text="å˜é‡å": åªè¦ $state.count å˜äº†ï¼Œè¿™é‡Œçš„æ•°å­—è‡ªåŠ¨å˜ -->
            Count: <span s-text="count">0</span>
        </div>

        <!-- [çº¦å®š] s-show="å˜é‡å": å¦‚æœ $state.isHigh ä¸º trueï¼Œåˆ™æ˜¾ç¤ºï¼Œå¦åˆ™éšè— -->
        <div class="warning" s-show="isHigh">
            âš ï¸ è­¦å‘Šï¼šæ•°å€¼è¿‡é«˜ï¼
        </div>

        <div class="btn-group">
            <!-- [çº¦å®š] s-on="äº‹ä»¶å:æ–¹æ³•å": ç‚¹å‡»æ—¶è°ƒç”¨ $state.decrement -->
            <button s-on="click:decrement">- å‡å°‘</button>
            <button s-on="click:increment">+ å¢åŠ </button>
        </div>

        <div class="input-group">
            <p>å¤‡æ³¨ä¿¡æ¯: <span s-text="note" style="font-weight:bold"></span></p>
            <!-- [çº¦å®š] s-model="å˜é‡å": åŒå‘ç»‘å®šï¼Œè¾“å…¥æ¡†å˜ -> å˜é‡å˜ -> s-text ä¹Ÿå˜ -->
            <input type="text" s-model="note" placeholder="åœ¨è¿™é‡Œè¾“å…¥ï¼Œä¸Šæ–¹ä¼šè‡ªåŠ¨åŒæ­¥">
        </div>
    </div>
</template>

<!-- [çº¦å®š] 3. script ç¼–å†™é€»è¾‘ -->
<script>
    // [çº¦å®š] $scope: ä»£è¡¨å½“å‰ç»„ä»¶çš„ ShadowRoot (ç±»ä¼¼ document)
    // [çº¦å®š] $host: ä»£è¡¨å½“å‰ç»„ä»¶æ ‡ç­¾æœ¬èº« <my-counter>
    // [çº¦å®š] $state: æœ€é‡è¦çš„å¯¹è±¡ï¼æ‰€æœ‰æ•°æ®å’Œæ–¹æ³•éƒ½è¦æŒ‚è½½åˆ°å®ƒä¸Šé¢

    // 1. åˆå§‹åŒ–æ•°æ®
    $state.count = 0;
    $state.note = 'Hello World';
    $state.isHigh = false;

    // 2. å®šä¹‰æ–¹æ³• (å¯¹åº” s-on)
    $state.increment = () => {
        $state.count++; // ç›´æ¥ä¿®æ”¹å±æ€§ï¼Œç•Œé¢è‡ªåŠ¨æ›´æ–°
        checkValue();
    };

    $state.decrement = () => {
        $state.count--;
        checkValue();
    };

    // å†…éƒ¨é€»è¾‘
    function checkValue() {
        // ä¿®æ”¹ isHighï¼Œç•Œé¢ä¸Šçš„ s-show ä¼šè‡ªåŠ¨å¤„ç†æ˜¾ç¤ºéšè—
        $state.isHigh = $state.count >= 5;
        
        // ç”šè‡³å¯ä»¥æ“ä½œåŸç”Ÿ DOM ä¿®æ”¹æ ·å¼
        if ($state.count < 0) {
            $scope.querySelector('.display-area').style.color = 'red';
        } else {
            $scope.querySelector('.display-area').style.color = '#333';
        }
    }

    console.log('ç»„ä»¶é€»è¾‘å·²åŠ è½½');
</script>
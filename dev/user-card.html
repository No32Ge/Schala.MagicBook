<style>
    .card { border: 1px solid #ccc; padding: 20px; border-radius: 8px; width: 300px; }
    .row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    button { cursor: pointer; padding: 5px 10px; }
</style>

<template>
    <div class="card">
        <div class="row">
            <h3>用户面板</h3>
            <!-- [关键] 单向数据流: 父组件的 myStatus 数据 -> 传给子组件的 status 属性 -->
            <status-badge s-bind:status="myStatus"></status-badge>
        </div>
        
        <p>当前控制: <b s-text="myStatus"></b></p>
        
        <button s-on="click:goOnline">上线</button>
        <button s-on="click:goOffline">下线</button>
    </div>
</template>

<script>
    $loader.registerComponent('status-badge', './status-badge.html');

    // 1. 父组件初始化数据
    $state.myStatus = 'offline';

    // 2. 修改父组件数据 -> 会自动触发 s-bind -> 更新子组件属性 -> 触发子组件 $watch
    $state.goOnline = () => {
        $state.myStatus = 'online';
    };

    $state.goOffline = () => {
        $state.myStatus = 'offline';
    };
</script>